function asyncGeneratorStep(e,n,t,o,i,s,r){try{var a=e[s](r),c=a.value}catch(e){return void t(e)}a.done?n(c):Promise.resolve(c).then(o,i)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise(function(o,i){var s=e.apply(n,t);function r(e){asyncGeneratorStep(s,o,i,r,a,"next",e)}function a(e){asyncGeneratorStep(s,o,i,r,a,"throw",e)}r(void 0)})}}const PushNotification={SIMPLEPUSH_SERVER_URL:"https://simplepush.fydeos.com",SIMPLEPUSH_WEBSOCKET_URL:"wss://simplepush.fydeos.com/ws",connect(){var e=this;return _asyncToGenerator(function*(){const n=`lang=${getChromeLanguage()}&boardName=${yield fydeos.system.getBoardName()}&version=${yield fydeos.system.getFydeOSVersion()}`;let t=new WebSocket(`${e.SIMPLEPUSH_WEBSOCKET_URL}/?${n}`);t.onopen=(()=>{}),t.onmessage=function(){var n=_asyncToGenerator(function*({data:n}){try{const{notification:t}=JSON.parse(n);let o=!1;if(t&&(yield fydeos.notification.needsDisplay(t))){const{content:e,uuid:n}=t;fydeos.notification.create(e),yield setChromeLocalStorage({push_id:n}),o=!0}yield e.responseServer({notification:t,displayed:o})}catch(e){}});return function(e){return n.apply(this,arguments)}}(),t.onclose=(()=>{setTimeout(()=>{e.connect()},1e4)}),t.onerror=function(e){t.close()}})()},fetch(){var e=this;return _asyncToGenerator(function*(){const n=`lang=${getChromeLanguage()}&boardName=${yield fydeos.system.getBoardName()}&version=${yield fydeos.system.getFydeOSVersion()}`;try{const t=yield fetch(`${e.SIMPLEPUSH_SERVER_URL}/notification/latest?${n}`),{notification:o}=yield t.json();let i=!1;if(o&&(yield fydeos.notification.needsDisplay(o))){const{content:e,uuid:n}=o;fydeos.notification.create(e),yield setChromeLocalStorage({push_id:n}),i=!0}yield e.responseServer({notification:o,displayed:i})}catch(e){}})()},responseServer(e){var n=this;return _asyncToGenerator(function*(){yield fetch(`${n.SIMPLEPUSH_SERVER_URL}/notification/clientmessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})()}};_asyncToGenerator(function*(){yield PushNotification.connect()})();